<div class="sector2-1-img"></div>


<img src="../assets/images/sector2_image/companywe_sector2_img2.png"
     style="position: absolute;left: 742px;z-index: 30;"/>

<!--current="main.currentCompanyResources.dem_negawatt"-->
<round-progress
  max="100"
  current="state2_1.gageCurrentDevelop"
  color="#80ffff"
  bgcolor="#edfbff"
  radius="210"
  stroke="50"
  rounded="true"
  clockwise="true"
  responsive="false"
  duration="800"
  animation="easeInOutQuart"
  animation-delay="0"
  style="top: 735px;left: 1316px;width: 470px;height: 470px;
  -ms-transform: rotate(180deg); /* IE 9 */
  -webkit-transform: rotate(180deg); /* Chrome, Safari, Opera */
  transform: rotate(180deg);"></round-progress>

<div class="absolute" style="z-index: 40;">
  <!--title-->
  <div class="absolute pt42 bfffff" style="left: 954px;top: 80px;width: 260px;">
    NVPP <span class="c-7ca6a6" style="font-weight: 200;">VISION</span>
  </div>

  <div class="absolute pt42 bfffff" style="left: 2040px;top: 80px;width: 260px;">ROOT</div>
  <div class="absolute pt42 bfffff resource-dropdown" style="left: 2317px;top: 80px;width: 416px;">
    <span uib-dropdown on-toggle="toggled(open)">
      <a href id="simple-dropdown" uib-dropdown-toggle style="color: #bfffff;">
        MicroNOC
      </a>
      <ul class="dropdown-menu" uib-dropdown-menu aria-labelledby="simple-dropdown">
        <li ng-repeat="resource in state2_1.companiesResources">
          <a href>{{resource.res_name}}</a>
        </li>
      </ul>
    </span>
  </div>

  <div class="drType-btn" value="0" ng-click="state2_1.clickDR(0)" ng-class="state2_1.drType == 0 ? 'dr-btn state2-btn-dr-on' : 'dr-btn state2-btn-dr'" style="left: 2994px;top: 55px;">total</div>
  <div class="drType-btn" value="1" ng-click="state2_1.clickDR(1)" ng-class="state2_1.drType == 1 ? 'dr-btn state2-btn-dr-on' : 'dr-btn state2-btn-dr'" style="left: 3138px;top: 55px;">DR1</div>
  <div class="drType-btn" value="2" ng-click="state2_1.clickDR(2)" ng-class="state2_1.drType == 2 ? 'dr-btn state2-btn-dr-on' : 'dr-btn state2-btn-dr'" style="left: 3280px;top: 55px;">DR2</div>
  <div class="drType-btn" value="3" ng-click="state2_1.clickDR(3)" ng-class="state2_1.drType == 3 ? 'dr-btn state2-btn-dr-on' : 'dr-btn state2-btn-dr'" style="left: 2994px;top: 103px;">DR3</div>
  <div class="drType-btn" value="4" onclick="javascript:alert('Prepating this function in the next version');" ng-class="state2_1.drType == 4 ? 'dr-btn state2-btn-dr-on' : 'dr-btn state2-btn-dr'" style="left: 3138px;top: 103px;">DR4</div>
  <div class="drType-btn" value="5" ng-click="state2_1.clickDR(5)" ng-class="state2_1.drType == 5 ? 'dr-btn state2-btn-dr-on' : 'dr-btn state2-btn-dr'" style="left: 3280px;top: 103px;">DR etc.</div>

  <!--section-->
  <div class="sector2-map">
    <div class="absolute" style="left: 250px;top: 453px;width: 230px;text-align: center;">
      <span class="pt20 bfffff">generation (demand reduction)</span><br/>
      <span
        class="pt60 fffef2" ng-style="state2_1.leftData.nega_watt >= 10000000 && {'font-size' : '50px'} || state2_1.leftData.nega_watt >= 1000000 && {'font-size' : '55px'}">{{state2_1.leftData.nega_watt | number:1}}</span>
      <span class="pt24 fffef2">kW</span><br/>
      <span class="pt20 c-7ca6a6">for demand source</span>
    </div>

    <div class="absolute" style="left: 369px;top: 703px;width: 132px;">
      <span class="pt16 c-80ffff" style="margin-bottom: 6px;display: inline-block;">POWER OUTPUT</span><br/>
      <span class="watt-off">Megawatt Mode</span><br/>
      <span class="watt-on">Negawatt Mode</span>
    </div>

    <img src="../assets/images/sector2_image/high_line.png" style="position: absolute;left: 454px;top: 522px;" ng-show="state2_1.gageCurrentDevelop == 270" />
    <img src="../assets/images/sector2_image/highcost.png"  style="position: absolute;left: 508px;top: 522px;"  ng-show="state2_1.gageCurrentDevelop == 270" />

    <div class="absolute" style="left: 618px;top: 684px;width: 200px;">
      <span class="pt20 bfffff">MAX(MAX availability reduction amount)</span><br/>
      <span class="pt60 fffef2" ng-style="state2_1.maxAvailNegaWatt >= 1000000 && {'font-size' : '45px'}">{{state2_1.maxAvailNegaWatt | number:1}}</span><span class="pt24 fffef2">kW</span>
    </div>

    <!--수용가 list repeat-->
    <div class="absolute pt31 bfffff" style="left: 52px;top: 910px;width: 555px;">CUSTOMER ELECTRIC POWER USE</div>
    <div class="absolute" style="left: 52px;top: 1015px;width: 500px;height: 1037px;overflow-y: hidden;">
      <!--todo:: call value, current temp value-->
      <div class="absolute pt24 c-7ca6a6" style="width: 170px;line-height: 55px;">
        <!-- Tim. 로딩중 이미지 추가 -->
        <img src="../assets/images/loading_img.gif" ng-show=" ( !state2_1.resourcesConsumers || state2_1.resourcesConsumers == 0 ) && !state2_1.error" style="width:150px; height:150px; position: absolute;top: 130px;left: 175px;"/>
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
           width="500px" height="1037px" viewBox="-38 23 100 100" enable-background="new -38 20 100 100" xml:space="preserve" ng-show="state2_1.error">
        <path fill="#FFFFFF" d="M16.142,2L22,7.858v8.284L16.142,22H7.858L2,16.142V7.858L7.858,2H16.142z M16.971,0H7.029L0,7.029v9.941
          L7.029,24h9.941L24,16.971V7.029C24,7.029,16.971,0,16.971,0z M11,6h2v8h-2V6z M12,18.25c-0.69,0-1.25-0.56-1.25-1.25
          s0.56-1.25,1.25-1.25s1.25,0.56,1.25,1.25S12.69,18.25,12,18.25z"/>
        </svg>
        <ul ng-repeat="con in state2_1.resourcesConsumers|limitTo:6:state2_1.consumerBeginNumber">
          <!-- 자원선택이 전체(drType == 0)일때 동 상세보기 하면 너무 꼬임.. 일단 전체에서는 수용가 클릭 금지 -->
          <li class="cons-btn consumer-off" ng-value="con.cons_idx" ng-click=" (state2_1.drType != 0) && state2_1.clickConsumer(con.cons_idx)">{{con.cons_name}}
          </li>
        </ul>
      </div>
      <div class="absolute pt24 c-7ca6a6" style="left: 173px;top: 7px;width: 320px;height: 30px;line-height: 55px;" ng-show="!state2_1.error">
        <div ng-repeat="con in state2_1.resourcesConsumers|limitTo:6:state2_1.consumerBeginNumber" style="">

          <!-- 붉은 막대 -->
          <div
            style="float: left;background-color: #ff0000;height: 40px;margin-bottom: 40px;width: 10px;border-right: 1px solid #ff0000;"
            ng-show="con.dem_cbl - con.dem_watt < 0"></div>

          <!-- 붉은 선 -->
          <div
            style="float: left;background-color: #2e3c40;height: 40px;margin-bottom: 40px;width: 10px;border-right: 1px solid #ff0000;"
            ng-show="con.dem_cbl - con.dem_watt >= 0"></div>

          <div style="float: left;background-color: #bfffff;height: 40px;margin-bottom: 40px;max-width: 310px;"
               ng-style="{width:con.dem_watt*310/con.dem_cbl}"></div>
          <div style="margin-left:10px;background-color: #2e3c40;height: 40px;margin-bottom: 40px;width: 310px;"></div>
        </div>
      </div>
    </div>

    <div id="resource-graph" class="state2-graph" style="top: 320px;left: 987px;"></div>

    <section style="width: 2090px;height: 1225px;position: absolute;top: 903px;left: 600px;overflow: hidden;">
      <!-- Tim. 로딩중 이미지 추가 -->
      <img src="../assets/images/loading_img.gif" ng-show=" (!state2_1.consumersBuildings || state2_1.consumersBuildings.length == 0) && !state2_1.error" style="width:300px; height:300px; position: absolute;top: 322.5px;left: 895px;"/>
      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
           width="2090px" height="1225px" viewBox="-38 -28 100 100" enable-background="new -38 -28 100 100" xml:space="preserve" ng-show="state2_1.error">
        <path fill="#FFFFFF" d="M16.142,2L22,7.858v8.284L16.142,22H7.858L2,16.142V7.858L7.858,2H16.142z M16.971,0H7.029L0,7.029v9.941
          L7.029,24h9.941L24,16.971V7.029C24,7.029,16.971,0,16.971,0z M11,6h2v8h-2V6z M12,18.25c-0.69,0-1.25-0.56-1.25-1.25
          s0.56-1.25,1.25-1.25s1.25,0.56,1.25,1.25S12.69,18.25,12,18.25z"/>
      </svg>
      <!--each-->
      <div class="bfffff graph-section-each"
           ng-repeat="con in state2_1.consumersBuildings|limitTo:6:state2_1.buildingsBeginNumber">
        <div class="pt28" style="border-bottom: 1px solid #bfffff;padding-bottom: 4px;">{{con.st_name || con.cons_name}}</div>
        <div class="absolute pt24" style="top: 80px;">criteria time <span style="margin-left: 20px;">{{con.dateTime}}</span>
        </div>

        <img src="../assets/images/sector2_image/plant_img.png" ng-show="con.cons_division == 'F'"
             class="consumer-img"/>
        <img src="../assets/images/sector2_image/building_img.png" ng-show="con.cons_division == 'B' || con.cons_division == undefined"
             class="consumer-img"/>

        <!--빌딩 게이지 사용률로 변경-->
        <div class="factory-bg" ng-style="{height: (con.dem_watt/con.dem_cbl)*208}"></div>
        <!--height: con.operateRatio*335/100-->

        <div class="absolute" style="top:167px;">
          <div class="pt14">reduction load</div>
          <div class="pt24 ff7e47"
               ng-style="con.dem_cbl-con.dem_watt >= 10000 && {'font-size':'17px'} || con.dem_cbl-con.dem_watt >= 1000 && {'font-size':'20px'}">{{con.dem_cbl-con.dem_watt|number:1}}<span class="pt16">kW</span></div>
        </div>
        <div class="absolute" style="top:292px;">
          <div class="pt14">current load</div>
          <div class="pt20 fffbcc" ng-style="con.dem_watt >= 10000 && {'font-size':'17px'}">{{con.dem_watt}}<span class="pt16">kW</span></div>
        </div>
        <!--<div class="absolute" style="top:430px;">-->
          <!--<div class="pt14">MAX</div>-->
          <!--<div class="pt20">{{con.maxTarget|number:0}}<span class="pt16">kW</span></div>-->
        <!--</div>-->

        <div class="absolute" style="top:253px;left: 273px;z-index: 40;">
          <span class="pt14">CBL</span>
          <span class="pt20">{{con.dem_cbl}}<span class="pt16">kW</span></span>
        </div>
        <img src="../assets/images/sector2_image/factory_line.png"
             style="position: absolute;top: 284px;left: 50px;z-index: 40;"/>

        <!--<div class="absolute" style="top:411px;left: 265px;z-index: 40;">-->
          <!--<span class="pt14">TARGET</span>-->
          <!--<span class="pt20">{{con.dem_cbl-con.cont_watt|number:0}}<span class="pt16">kW</span></span>-->
        <!--</div>-->
        <!--line:: 바닥부터 cbl라인까지 높이 208px-->
        <!--<img src="../assets/images/sector2_image/factory_line2.png"-->
             <!--style="position: absolute;left: 50px;z-index: 40;"-->
             <!--ng-style="{top: con.line2}"-->
        <!--/>&lt;!&ndash;origin top: 442px&ndash;&gt;-->

        <div class="absolute"
             style="width: 200px;height: 320px;top:167px;left: 410px;border-left: 1px solid #3e5457;padding-left: 10px;">
          <div class="absolute" style="width: 177px;">
            <div class="pt14">use</div>
            <div class="pt60 ff7e47" style="text-align: center;">{{con.dem_rate|number:0}} %</div>
            <div class="pt8 c-7ca6a6">use =</div>
            <div class="pt8 c-7ca6a6">current load / CBL</div>
          </div>
          <div class="absolute" style="top:156px;line-height: 31px;">
            <div class="pt16 c-66ffff">current load</div>
            <div class="pt16">CBL</div>
            <div class="pt16 c-66ffff">reduction load</div>
            <div class="pt16">TARGET</div>
            <div class="pt16 c-66ffff">MAX TARGET</div>
          </div>
          <div class="absolute" style="top:156px;left: 127px;line-height: 31px;">
            <div class="pt16 c-66ffff">{{con.dem_watt|number:1}}kW</div>
            <div class="pt16">{{con.dem_cbl|number:1}}kW</div>
            <div class="pt16 c-66ffff">{{con.dem_cbl-con.dem_watt|number:0}}kW</div>
            <div class="pt16" style="color:#7ca6a6;">0 kW</div>
            <div class="pt16 c-66ffff"  style="color:#7ca6a6;">0 kW</div>
          </div>
        </div>

      </div>
    </section>


  </div>
</div>

<div class="sector2-map-go" ui-sref="state2"></div>

<!--consumer minus line-->
<!--<div class="absolute" style="width: 0;height: 328px;top: 1011px;left: 975px;border: 1px solid #ff0000;z-index: 40;"></div>-->

<!-- Tim 수정. API가 변경되어 include하고 state2-1Controller에서 데이터 제어 -->
<!--<state2-nav></state2-nav>-->
<div ng-include="'app/components/state2-nav/state2-nav-dr.html'"></div>
<!--<state2-nav2></state2-nav2>-->
<div ng-include="'app/components/state2-nav/state2-nav2.html'"></div>
